(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{0:function(e,t,n){e.exports=n("zUnb")},zUnb:function(e,t,n){"use strict";n.r(t);var i=n("jhN1"),s=n("fXoL"),o=n("BvB/"),b=n("tyNb"),c=n("IAdc"),r=n("lJxs"),a=n("vkgz"),d=n("eIep"),l=n("Kj3r");class u{}class p{}var f=n("GyhO"),h=function(e){return e.FEEDS="feeds",e.POSTS="posts",e}({}),g=n("ofXK");let m=(()=>{class e{constructor(e){this.domSanitizer=e}transform(e){return this.domSanitizer.bypassSecurityTrustHtml(e)}}return e.\u0275fac=function(t){return new(t||e)(s.Ib(i.b))},e.\u0275pipe=s.Hb({name:"sanitizeHtml",type:e,pure:!0}),e})();function v(e,t){if(1&e&&s.Jb(0,"img",11),2&e){const e=s.Ub(2);s.Yb("src",e.post.thumbnail,s.fc)}}const L=function(e){return{green:e}};function y(e,t){if(1&e){const e=s.Mb();s.Lb(0,"div",4),s.hc(1,v,1,1,"img",5),s.Lb(2,"div",6),s.Lb(3,"small",7),s.ic(4),s.Kb(),s.Lb(5,"h3",8),s.Sb("click",function(){s.dc(e);const t=s.Ub();return t.hidden=!t.hidden}),s.Vb(6,"sanitizeHtml"),s.Kb(),s.Kb(),s.Lb(7,"button",9),s.Sb("click",function(){s.dc(e);const t=s.Ub();return t.hidden=!t.hidden}),s.ic(8,"\ufe0f"),s.Jb(9,"img",10),s.Kb(),s.Kb()}if(2&e){const e=s.Ub();s.yb(1),s.Yb("ngIf",e.post.thumbnail),s.yb(3),s.kc(" ",e.shortInfo," "),s.yb(1),s.Yb("innerHTML",s.Wb(6,4,e.post.title),s.ec),s.yb(2),s.Yb("ngClass",s.bc(6,L,e.post.isNew))}}function K(e,t){if(1&e&&s.Jb(0,"img",11),2&e){const e=s.Ub(2);s.Yb("src",e.post.thumbnail,s.fc)}}function k(e,t){if(1&e){const e=s.Mb();s.Lb(0,"div",4),s.hc(1,K,1,1,"img",5),s.Lb(2,"div",6),s.Lb(3,"small",7),s.ic(4),s.Kb(),s.Lb(5,"h3"),s.Jb(6,"a",12),s.Vb(7,"sanitizeHtml"),s.Lb(8,"sup"),s.ic(9," \u2197"),s.Kb(),s.Kb(),s.Kb(),s.Lb(10,"button",9),s.Sb("click",function(){s.dc(e);const t=s.Ub();return t.hidden=!t.hidden}),s.Jb(11,"img",13),s.Kb(),s.Kb()}if(2&e){const e=s.Ub();s.yb(1),s.Yb("ngIf",e.post.thumbnail),s.yb(3),s.kc(" ",e.shortInfo," "),s.yb(2),s.Yb("href",e.post.link,s.fc)("innerHTML",s.Wb(7,5,e.post.title),s.ec),s.yb(4),s.Yb("ngClass",s.bc(7,L,e.post.isNew))}}function S(e,t){1&e&&s.Jb(0,"hr")}function I(e,t){if(1&e&&(s.Lb(0,"div",14),s.Jb(1,"div",15),s.Vb(2,"sanitizeHtml"),s.Kb()),2&e){const e=s.Ub();s.yb(1),s.Yb("innerHTML",s.Wb(2,1,e.post.content),s.ec)}}function w(e,t){1&e&&(s.Lb(0,"span"),s.ic(1,", "),s.Kb())}function U(e,t){if(1&e&&(s.Lb(0,"em"),s.ic(1),s.hc(2,w,2,0,"span",1),s.Kb()),2&e){const e=t.$implicit,n=t.last;s.yb(1),s.jc(e),s.yb(1),s.Yb("ngIf",!n)}}function O(e,t){if(1&e&&(s.Lb(0,"div",16),s.hc(1,U,3,2,"em",17),s.Kb()),2&e){const e=s.Ub();s.yb(1),s.Yb("ngForOf",e.post.categories)}}function j(e,t){if(1&e&&s.Jb(0,"img",21),2&e){const e=s.Ub(3);s.Yb("src",e.post.enclosure.thumbnail,s.fc)}}function Y(e,t){if(1&e&&(s.Lb(0,"a",19),s.hc(1,j,1,1,"img",20),s.Kb()),2&e){const e=s.Ub(2);s.Yb("href",e.post.enclosure.link,s.fc),s.yb(1),s.Yb("ngIf",e.post.enclosure.thumbnail)}}function F(e,t){if(1&e&&(s.Lb(0,"div"),s.ic(1),s.Kb()),2&e){const e=s.Ub(2);s.yb(1),s.kc("Type: ",null==e.post.enclosure?null:e.post.enclosure.type,"")}}function x(e,t){if(1&e&&(s.Lb(0,"div"),s.hc(1,Y,2,2,"a",18),s.hc(2,F,2,1,"div",1),s.Kb()),2&e){const e=s.Ub();s.yb(1),s.Yb("ngIf",null==e.post.enclosure?null:e.post.enclosure.thumbnail),s.yb(1),s.Yb("ngIf",null==e.post.enclosure?null:e.post.enclosure.type)}}function M(e,t){if(1&e&&(s.Lb(0,"div"),s.ic(1),s.Kb()),2&e){const e=s.Ub(2);s.yb(1),s.kc("Type: ",null==e.post.enclosure?null:e.post.enclosure.type,"")}}function R(e,t){if(1&e&&(s.Lb(0,"div"),s.Jb(1,"img",21),s.hc(2,M,2,1,"div",1),s.Kb()),2&e){const e=s.Ub();s.yb(1),s.Yb("src",e.post.enclosure.link,s.fc),s.yb(1),s.Yb("ngIf",null==e.post.enclosure?null:e.post.enclosure.type)}}function T(e,t){if(1&e&&(s.Lb(0,"div"),s.ic(1),s.Kb()),2&e){const e=s.Ub(2);s.yb(1),s.kc("Type: ",null==e.post.enclosure?null:e.post.enclosure.type,"")}}function P(e,t){if(1&e&&(s.Lb(0,"div"),s.ic(1),s.Kb()),2&e){const e=s.Ub(2);s.yb(1),s.kc("Length: ",null==e.post.enclosure?null:e.post.enclosure.length,"")}}function E(e,t){if(1&e&&(s.Lb(0,"div"),s.Lb(1,"a",22),s.ic(2,"Enclosure"),s.Lb(3,"sup"),s.ic(4,"\u2197\ufe0f"),s.Kb(),s.Kb(),s.hc(5,T,2,1,"div",1),s.hc(6,P,2,1,"div",1),s.Kb()),2&e){const e=s.Ub();s.yb(1),s.Yb("href",e.post.enclosure.url,s.fc),s.yb(4),s.Yb("ngIf",null==e.post.enclosure?null:e.post.enclosure.type),s.yb(1),s.Yb("ngIf",null==e.post.enclosure?null:e.post.enclosure.length)}}let J=(()=>{class e{constructor(){this.post=new p,this.hidden=!0}get isImage(){var e,t,n;const i=(null===(t=null===(e=this.post)||void 0===e?void 0:e.enclosure)||void 0===t?void 0:t.type)||"";return"image"===(null===(n=null==i?void 0:i.split("/"))||void 0===n?void 0:n[0])}get shortInfo(){return[this.post.author,this.post.pubDate,this.readTime].filter(e=>e).join(", ")}get readTime(){const e=Math.round(this.post.content.toString().length/1500);return e<1?"":`\u23f1 ~${e}m`}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Cb({type:e,selectors:[["app-post"]],inputs:{post:"post"},decls:8,vars:8,consts:[["class","post-header",4,"ngIf"],[4,"ngIf"],["class","post-box",4,"ngIf"],["class","small text-muted mb-1",4,"ngIf"],[1,"post-header"],["class","post-header-thumbnail","alt","thumbnail",3,"src",4,"ngIf"],[1,"post-header-text"],[1,"short-info"],[3,"innerHTML","click"],[1,"ml-auto","a-button","post-button",3,"ngClass","click"],["src","assets/expand.svg","alt","Expand post"],["alt","thumbnail",1,"post-header-thumbnail",3,"src"],["target","_blank",3,"href","innerHTML"],["src","assets/unexpand.svg","alt","Unexpand post"],[1,"post-box"],[3,"innerHTML"],[1,"small","text-muted","mb-1"],[4,"ngFor","ngForOf"],[3,"href",4,"ngIf"],[3,"href"],["alt","thumbnail",3,"src",4,"ngIf"],["alt","thumbnail",3,"src"],["target","_blank",3,"href"]],template:function(e,t){1&e&&(s.hc(0,y,10,8,"div",0),s.hc(1,k,12,9,"div",0),s.hc(2,S,1,0,"hr",1),s.hc(3,I,3,3,"div",2),s.hc(4,O,2,1,"div",3),s.hc(5,x,3,2,"div",1),s.hc(6,R,3,2,"div",1),s.hc(7,E,7,3,"div",1)),2&e&&(s.Yb("ngIf",t.hidden),s.yb(1),s.Yb("ngIf",!t.hidden),s.yb(1),s.Yb("ngIf",!t.hidden),s.yb(1),s.Yb("ngIf",!t.hidden),s.yb(1),s.Yb("ngIf",(null==t.post||null==t.post.categories?null:t.post.categories.length)&&!t.hidden),s.yb(1),s.Yb("ngIf",(null==t.post.enclosure?null:t.post.enclosure.thumbnail)&&!t.hidden),s.yb(1),s.Yb("ngIf",t.isImage&&!t.hidden),s.yb(1),s.Yb("ngIf",!(null!=t.post.enclosure&&t.post.enclosure.thumbnail)&&!t.hidden&&(null==t.post.enclosure?null:t.post.enclosure.url)))},directives:[g.k,g.i,g.j],pipes:[m],encapsulation:2}),e})();function A(e,t){if(1&e){const e=s.Mb();s.Lb(0,"button",20),s.Sb("click",function(){return s.dc(e),s.Ub(2).removeAllPosts()}),s.ic(1,"Remove all posts"),s.Kb()}}function $(e,t){if(1&e){const e=s.Mb();s.Lb(0,"div",17),s.Lb(1,"button",18),s.Sb("click",function(){return s.dc(e),s.Ub().deleteFeed()}),s.ic(2,"Delete the feed"),s.Kb(),s.hc(3,A,2,0,"button",19),s.Kb()}if(2&e){const e=s.Ub();s.yb(3),s.Yb("ngIf",e.posts.length>0)}}function D(e,t){if(1&e&&(s.Lb(0,"div"),s.Lb(1,"strong",21),s.ic(2,"Title:"),s.Kb(),s.Lb(3,"span"),s.ic(4),s.Kb(),s.Kb()),2&e){const e=s.Ub();s.yb(4),s.jc(e.about.title)}}function C(e,t){if(1&e&&(s.Lb(0,"div"),s.Lb(1,"strong",21),s.ic(2,"Author:"),s.Kb(),s.Lb(3,"span"),s.ic(4),s.Kb(),s.Kb()),2&e){const e=s.Ub();s.yb(4),s.jc(e.about.author)}}function N(e,t){if(1&e&&(s.Lb(0,"div"),s.Lb(1,"strong",21),s.ic(2,"Description:"),s.Kb(),s.Lb(3,"span"),s.ic(4),s.Kb(),s.Kb()),2&e){const e=s.Ub();s.yb(4),s.jc(e.about.description)}}function B(e,t){if(1&e&&(s.Lb(0,"div"),s.Lb(1,"strong",21),s.ic(2,"Link:"),s.Kb(),s.Lb(3,"a",22),s.ic(4),s.Kb(),s.Kb()),2&e){const e=s.Ub();s.yb(3),s.Zb("href",e.about.link,s.fc),s.yb(1),s.jc(e.about.link)}}function q(e,t){if(1&e&&(s.Lb(0,"div",23),s.Jb(1,"app-post",24),s.Kb()),2&e){const e=t.$implicit;s.yb(1),s.Yb("post",e)}}function H(e,t){if(1&e){const e=s.Mb();s.Lb(0,"div",25),s.Lb(1,"button",26),s.Sb("click",function(){return s.dc(e),s.Ub().showMore()}),s.ic(2," Show 10 more posts "),s.Kb(),s.Kb()}}const W=function(e){return{"active-actions":e}};let z=(()=>{class e{constructor(e,t,n){this.dbService=e,this.router=t,this.route=n,this.posts=[],this.displayActions=!1,this.viewCount=10,this.about=new u,this.identify=(e,t)=>t.id}get viewPosts(){return this.posts.slice(0,this.viewCount)}showMore(){this.viewCount+=10}markAsRead(){const e=this.posts.filter(e=>e.isNew).map(e=>this.dbService.update(h.POSTS,Object.assign(Object.assign({},e),{isNew:!1})));Object(f.a)(...e).pipe(Object(c.a)()).subscribe()}deleteTail(){const e=this.posts.slice(99).map(e=>this.dbService.delete(h.POSTS,e.id));Object(f.a)(...e).pipe(Object(c.a)()).subscribe()}ngOnInit(){this.route.params.pipe(Object(r.a)(e=>e.id),Object(a.a)(e=>this.feedId=+e),Object(d.a)(e=>this.dbService.getByID(h.FEEDS,+e)),Object(a.a)(e=>this.about=e.about),Object(d.a)(e=>this.dbService.getAllByIndex(h.POSTS,"feedId",IDBKeyRange.only(this.feedId))),Object(a.a)(e=>this.posts=(null==e?void 0:e.reverse())||[]),Object(l.a)(200),Object(a.a)(()=>this.markAsRead()),Object(l.a)(200),Object(a.a)(()=>this.deleteTail())).subscribe()}deleteFeed(){if(!0===confirm("Remove the feed?")){const e=[this.dbService.delete(h.FEEDS,this.feedId),...this.posts.map(e=>this.dbService.delete(h.POSTS,e.id))];Object(f.a)(...e).pipe(Object(c.a)()).subscribe(()=>this.router.navigate(["/"]))}}removeAllPosts(){if(!0===confirm("Remove all the posts?")){const e=this.posts.map(e=>this.dbService.delete(h.POSTS,e.id));Object(f.a)(...e).pipe(Object(c.a)()).subscribe(()=>this.ngOnInit())}}}return e.\u0275fac=function(t){return new(t||e)(s.Ib(o.b),s.Ib(b.b),s.Ib(b.a))},e.\u0275cmp=s.Cb({type:e,selectors:[["app-feed"]],decls:26,vars:12,consts:[[3,"ngClass"],[1,"container"],[1,"p-1"],[1,"top-top-feed"],[1,"a-button","lh-20",3,"click"],["routerLink","/",1,"ml-auto"],["width","16","src","assets/back.svg","alt","Back to feeds"],["class","mb-2 mt-1",4,"ngIf"],[1,"w-100"],[1,"feed-image"],["onerror","this.src='assets/icon-72x72.png'","alt","image",3,"src"],[1,"feed-about"],[4,"ngIf"],["class","post-wrapper",4,"ngFor","ngForOf","ngForTrackBy"],["class","feed-line p-1 pb-2",4,"ngIf"],[1,"bottom-box"],["src","assets/favicon-32x32.png"],[1,"mb-2","mt-1"],[1,"a-button","red","lh-20","mr-1",3,"click"],["class","a-button red lh-20",3,"click",4,"ngIf"],[1,"a-button","red","lh-20",3,"click"],[1,"mr-1"],["target","_blank",3,"href"],[1,"post-wrapper"],[3,"post"],[1,"feed-line","p-1","pb-2"],[1,"ml-auto","a-button","mr-auto",3,"click"]],template:function(e,t){1&e&&(s.Lb(0,"div",0),s.Lb(1,"div",1),s.Lb(2,"div",2),s.Lb(3,"div",3),s.Lb(4,"button",4),s.Sb("click",function(){return t.displayActions=!t.displayActions}),s.ic(5,"\u2699"),s.Kb(),s.Lb(6,"a",5),s.Jb(7,"img",6),s.ic(8," Back to feeds "),s.Kb(),s.Kb(),s.hc(9,$,4,1,"div",7),s.Kb(),s.Kb(),s.Kb(),s.Lb(10,"div",1),s.Lb(11,"table",8),s.Lb(12,"tbody"),s.Lb(13,"tr"),s.Lb(14,"td",9),s.Jb(15,"img",10),s.Kb(),s.Lb(16,"td",11),s.hc(17,D,5,1,"div",12),s.hc(18,C,5,1,"div",12),s.hc(19,N,5,1,"div",12),s.hc(20,B,5,2,"div",12),s.Kb(),s.Kb(),s.Kb(),s.Kb(),s.hc(21,q,2,1,"div",13),s.hc(22,H,3,0,"div",14),s.Jb(23,"hr"),s.Lb(24,"div",15),s.Jb(25,"img",16),s.Kb(),s.Kb()),2&e&&(s.Yb("ngClass",s.bc(10,W,t.displayActions)),s.yb(9),s.Yb("ngIf",t.displayActions),s.yb(6),s.Yb("src",t.about.image||"assets/icon-72x72.png",s.fc),s.yb(2),s.Yb("ngIf",t.about.title),s.yb(1),s.Yb("ngIf",t.about.author),s.yb(1),s.Yb("ngIf",t.about.description),s.yb(1),s.Yb("ngIf",t.about.link),s.yb(1),s.Yb("ngForOf",t.viewPosts)("ngForTrackBy",t.identify),s.yb(1),s.Yb("ngIf",t.viewCount<t.posts.length))},directives:[g.i,b.d,g.k,g.j,J],styles:[""]}),e})();var _=n("XNiG"),V=n("itXk"),G=n("1G5W"),X=n("LRne"),Z=n("JIr8"),Q=n("tk/3");let ee=(()=>{class e{constructor(e,t){this.http=e,this.dbService=t,this.feedLoading$=new _.a,this.feedError$=new _.a}updateFeed(e,t,n){this.dbService.update(h.FEEDS,{url:e,id:t,about:n})}addPosts(e,t){e.forEach(e=>{this.dbService.add(h.POSTS,Object.assign(Object.assign({},e),{feedId:t,isNew:!0})).subscribe()})}getNewPostsAndUpdateStore(e,t){return this.feedLoading$.next([t,!0]),this.http.get(encodeURI(`https://api.rss2json.com/v1/api.json?rss_url=${e}`)).pipe(Object(a.a)(n=>{this.updateFeed(e,t,n.feed),this.addPosts(n.items.reverse(),t),this.feedLoading$.next([t,!1])}),Object(Z.a)(e=>(this.feedLoading$.next([t,!1]),this.feedError$.next([t,e.message||"Error"]),Object(X.a)(null))))}refreshFeeds(e){const t=e.map(e=>this.getNewPostsAndUpdateStore(e.url,e.id));return Object(f.a)(...t).pipe(Object(c.a)())}}return e.\u0275fac=function(t){return new(t||e)(s.Pb(Q.a),s.Pb(o.b))},e.\u0275prov=s.Eb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var te=n("3Pt+");let ne=(()=>{class e{constructor(e){this.dbService=e}transform(e,t){const n=e=>void 0===t||e.isNew===t;return this.dbService.getAllByIndex(h.POSTS,"feedId",IDBKeyRange.only(e)).pipe(Object(r.a)(e=>e.filter(n).length))}}return e.\u0275fac=function(t){return new(t||e)(s.Ib(o.b))},e.\u0275pipe=s.Hb({name:"count",type:e,pure:!0}),e})();function ie(e,t){if(1&e){const e=s.Mb();s.Lb(0,"button",22),s.Sb("click",function(){return s.dc(e),s.Ub().share()}),s.Jb(1,"img",23),s.Kb()}}function se(e,t){if(1&e&&(s.Lb(0,"div",32),s.Lb(1,"small"),s.ic(2),s.Kb(),s.Kb()),2&e){const e=s.Ub().$implicit,t=s.Ub();s.yb(2),s.kc("\ud83d\udca2 ",t.feedError[e.id],"")}}function oe(e,t){1&e&&s.Jb(0,"span",33)}function be(e,t){if(1&e&&(s.Lb(0,"sup",35),s.ic(1),s.Vb(2,"async"),s.Vb(3,"count"),s.Kb()),2&e){const e=s.Ub(2).$implicit;s.yb(1),s.kc(" +",s.Wb(2,1,s.Xb(3,3,e.id,!0))," ")}}function ce(e,t){if(1&e&&(s.Lb(0,"span"),s.hc(1,be,4,6,"sup",34),s.Vb(2,"async"),s.Vb(3,"count"),s.ic(4),s.Vb(5,"async"),s.Vb(6,"count"),s.Kb()),2&e){const e=s.Ub().$implicit;s.yb(1),s.Yb("ngIf",s.Wb(2,2,s.Xb(3,4,e.id,!0))>0),s.yb(3),s.kc(" ",s.Wb(5,7,s.Wb(6,9,e.id))||"-"," ")}}const re=function(e){return["/",e]};function ae(e,t){if(1&e&&(s.Lb(0,"div",24),s.Lb(1,"div",25),s.Lb(2,"strong",26),s.ic(3),s.Kb(),s.Jb(4,"br"),s.Lb(5,"small",26),s.ic(6),s.Kb(),s.hc(7,se,3,1,"div",27),s.Kb(),s.Lb(8,"div",28),s.Lb(9,"button",29),s.hc(10,oe,1,0,"span",30),s.hc(11,ce,7,11,"span",31),s.Kb(),s.Kb(),s.Kb()),2&e){const e=t.$implicit,n=s.Ub();s.yb(3),s.jc((null==e.about?null:e.about.title)||"noname"),s.yb(3),s.jc(e.url),s.yb(1),s.Yb("ngIf",n.feedError[e.id]),s.yb(2),s.Yb("disabled",n.feedLoading[e.id])("routerLink",s.bc(7,re,e.id)),s.yb(1),s.Yb("ngIf",n.feedLoading[e.id]),s.yb(1),s.Yb("ngIf",!n.feedLoading[e.id])}}function de(e,t){if(1&e){const e=s.Mb();s.Lb(0,"div",36),s.Lb(1,"button",37),s.Sb("click",function(){return s.dc(e),s.Ub().addFeedMode=!0}),s.ic(2,"+ add"),s.Kb(),s.Kb()}}const le=function(){return["https://example.com/feed1\nhttps://example.com/feed2"]};function ue(e,t){if(1&e){const e=s.Mb();s.Lb(0,"form",38),s.Lb(1,"fieldset"),s.Lb(2,"label",39),s.ic(3,"Enter new feed URLs"),s.Kb(),s.Lb(4,"textarea",40),s.Sb("ngModelChange",function(t){return s.dc(e),s.Ub().rawFeedURLs=t}),s.Kb(),s.Lb(5,"button",41),s.Sb("click",function(){s.dc(e);const t=s.Ub();return t.addFeeds(t.rawFeedURLs)}),s.ic(6,"Add to the feeds"),s.Kb(),s.Kb(),s.Kb()}if(2&e){const e=s.Ub();s.yb(4),s.Yb("ngModel",e.rawFeedURLs)("placeholder",s.ac(2,le))}}function pe(e,t){if(1&e){const e=s.Mb();s.Lb(0,"button",42),s.Sb("click",function(){return s.dc(e),s.Ub().unregister()}),s.ic(1,"Unregister SW"),s.Kb()}}const fe=[{path:":id",component:z},{path:"",component:(()=>{class e{constructor(e,t){this.dbService=e,this.coreService=t,this.feeds=[],this.addFeedMode=!1,this.godMode=!1,this.rawFeedURLs="",this.feedLoading={},this.feedError={},this.loading=!1,this.ngUnsubscribe$=new _.a,this.identify=(e,t)=>t.id}get shareIsSuported(){return!!navigator.share}addFeeds(e){this.addFeedMode=!1,this.rawFeedURLs="";const t=e.split("\n").map(e=>e.trim()).filter(e=>e).filter(e=>(e=>{let t;try{t=new URL(e)}catch(n){return!1}return"http:"===t.protocol||"https:"===t.protocol})(e)).map(e=>this.dbService.add(h.FEEDS,{url:e}));Object(V.a)(t).subscribe(()=>this.load())}refreshFeeds(){this.loading=!0,this.feedError={},this.coreService.refreshFeeds(this.feeds).subscribe(()=>{this.loading=!1,this.load()})}share(){var e;null===(e=navigator.share)||void 0===e||e.call(navigator,{title:"Stupid RSS",text:this.feeds.map(e=>e.url).join(" \n"),url:location.href})}load(){this.dbService.getAll(h.FEEDS).subscribe(e=>this.feeds=e)}ngOnInit(){this.coreService.feedLoading$.pipe(Object(G.a)(this.ngUnsubscribe$)).subscribe(([e,t])=>this.feedLoading[e]=t),this.coreService.feedError$.pipe(Object(G.a)(this.ngUnsubscribe$)).subscribe(([e,t])=>this.feedError[e]=t),this.load();try{this.addFeeds(function(){const e=localStorage.getItem("feedList");localStorage.removeItem("feedList");try{return JSON.parse(e).join("\n")}catch(t){return""}}())}catch(e){}}unregister(){var e;!0===confirm("Unregister the Service Worker?")&&(null===(e=navigator.serviceWorker)||void 0===e||e.getRegistrations().then(e=>{for(const t of e)t.unregister()}))}ngOnDestroy(){this.ngUnsubscribe$.next(),this.ngUnsubscribe$.complete()}}return e.\u0275fac=function(t){return new(t||e)(s.Ib(o.b),s.Ib(ee))},e.\u0275cmp=s.Cb({type:e,selectors:[["app-home"]],decls:65,vars:7,consts:[[1,"container","mb-3","mt-3"],[1,"w-100"],["routerLink","/"],["alt","Stupid RSS Reader logo","src","assets/fur-boot-green.svg",2,"width","5rem"],[1,"ml-2","app-name"],[1,"container","p-1","mb-2",2,"background-color","rgba(255,248,220,0.5)"],[1,"feeds-header"],[1,"mr-auto"],["class","a-button button-share mr-1",3,"click",4,"ngIf"],[1,"a-button","green",3,"disabled","click"],["class","feed-line",4,"ngFor","ngForOf","ngForTrackBy"],["class","mt-1",4,"ngIf"],["class","pure-form pure-form-stacked",4,"ngIf"],[1,"container","p-1","mb-2",2,"background-color","rgba(255,235,205,0.5)"],["href","https://rss2json.com/","target","_blank"],["href","https://developers.google.com/web/progressive-web-apps/","target","_blank"],["href","https://developer.mozilla.org/ru/docs/Web/API/IndexedDB_API","target","_blank"],["href","https://github.com/gurov/stupid-rss-reader","target","_blank"],[1,"container","p-1","mb-2",2,"background-color","rgba(255,250,240,0.5)"],[1,"bottom-box"],["src","assets/favicon-32x32.png",3,"click"],["class","a-button red ml-1 lh-20",3,"click",4,"ngIf"],[1,"a-button","button-share","mr-1",3,"click"],["src","assets/share.svg","alt","Share feeds"],[1,"feed-line"],[1,"mr-1"],[1,"fit-text"],["style","color: #82280c","class","fit-text",4,"ngIf"],[1,"ml-auto",2,"text-align","right"],[1,"a-button",2,"width","60px",3,"disabled","routerLink"],["class","spinner",4,"ngIf"],[4,"ngIf"],[1,"fit-text",2,"color","#82280c"],[1,"spinner"],["class","new-info",4,"ngIf"],[1,"new-info"],[1,"mt-1"],[1,"a-button","lh-20",3,"click"],[1,"pure-form","pure-form-stacked"],["for","new-feeds"],["name","rawFeedURLs","id","new-feeds",1,"pure-input-1",3,"ngModel","placeholder","ngModelChange"],["type","button",1,"a-button","lh-20",3,"click"],[1,"a-button","red","ml-1","lh-20",3,"click"]],template:function(e,t){1&e&&(s.Lb(0,"div",0),s.Lb(1,"table",1),s.Lb(2,"tbody"),s.Lb(3,"tr"),s.Lb(4,"td"),s.Lb(5,"a",2),s.Jb(6,"img",3),s.Kb(),s.Kb(),s.Lb(7,"td"),s.Lb(8,"h1",4),s.ic(9,"Stupid RSS Reader"),s.Kb(),s.Kb(),s.Kb(),s.Kb(),s.Kb(),s.Kb(),s.Lb(10,"div",5),s.Lb(11,"div",6),s.Lb(12,"h2",7),s.ic(13,"Feeds"),s.Kb(),s.hc(14,ie,2,0,"button",8),s.Lb(15,"button",9),s.Sb("click",function(){return t.refreshFeeds()}),s.ic(16,"Refresh all feeds"),s.Kb(),s.Kb(),s.hc(17,ae,12,9,"div",10),s.hc(18,de,3,0,"div",11),s.Lb(19,"div"),s.hc(20,ue,7,3,"form",12),s.Kb(),s.Kb(),s.Lb(21,"div",13),s.Lb(22,"h3"),s.ic(23,"About"),s.Kb(),s.Lb(24,"p"),s.ic(25,"I'm tired of different stupid RSS clients and I created own Stupid RSS Reader."),s.Kb(),s.Lb(26,"h4"),s.ic(27,"Proxy for RSS"),s.Kb(),s.Lb(28,"p"),s.ic(29," The application must use the proxy "),s.Lb(30,"a",14),s.ic(31,"rss2json.com"),s.Kb(),s.ic(32," because CORS restrictions on cross-site requests. "),s.Kb(),s.Lb(33,"h4"),s.ic(34,"Features"),s.Kb(),s.Lb(35,"ul"),s.Lb(36,"li"),s.ic(37,"Stupid RSS is "),s.Lb(38,"a",15),s.ic(39,"Progressive Web App"),s.Kb(),s.Kb(),s.Lb(40,"li"),s.ic(41,"You can install it to your smartphone"),s.Kb(),s.Lb(42,"li"),s.ic(43,"Very simple interface"),s.Kb(),s.Lb(44,"li"),s.ic(45,"Offline mode"),s.Kb(),s.Lb(46,"li"),s.ic(47,"All user data are stored locally only ("),s.Lb(48,"a",16),s.ic(49,"IndexedDB"),s.Kb(),s.ic(50,")"),s.Kb(),s.Lb(51,"li"),s.ic(52,"The last 99 posts are stored. Deletion occurs after downloading new ones"),s.Kb(),s.Lb(53,"li"),s.ic(54,"Open source: "),s.Lb(55,"a",17),s.ic(56,"Github"),s.Kb(),s.Kb(),s.Kb(),s.Kb(),s.Lb(57,"div",18),s.Lb(58,"h3"),s.ic(59,"Philosophy"),s.Kb(),s.Lb(60,"p"),s.ic(61,"The application does not impose anything, but only executes orders."),s.Kb(),s.Kb(),s.Lb(62,"div",19),s.Lb(63,"img",20),s.Sb("click",function(){return t.godMode=!t.godMode}),s.Kb(),s.hc(64,pe,2,0,"button",21),s.Kb()),2&e&&(s.yb(14),s.Yb("ngIf",t.shareIsSuported),s.yb(1),s.Yb("disabled",t.loading),s.yb(2),s.Yb("ngForOf",t.feeds)("ngForTrackBy",t.identify),s.yb(1),s.Yb("ngIf",!t.addFeedMode),s.yb(2),s.Yb("ngIf",t.addFeedMode),s.yb(44),s.Yb("ngIf",t.godMode))},directives:[b.d,g.k,g.j,b.c,te.g,te.d,te.e,te.a,te.c,te.f],pipes:[g.b,ne],encapsulation:2}),e})()}];let he=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.Gb({type:e}),e.\u0275inj=s.Fb({imports:[[b.e.forRoot(fe,{useHash:!0})],b.e]}),e})(),ge=(()=>{class e{constructor(){this.title="stupid-rss-reader"}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Cb({type:e,selectors:[["app-root"]],decls:2,vars:0,template:function(e,t){1&e&&(s.Lb(0,"div"),s.Jb(1,"router-outlet"),s.Kb())},directives:[b.f],styles:[""]}),e})();var me=n("Jho9");const ve={name:"Stupid-RSS-Reader",version:1,objectStoresMeta:[{store:"posts",storeConfig:{keyPath:"id",autoIncrement:!0},storeSchema:[{name:"title",keypath:"title",options:{unique:!1}},{name:"feedId",keypath:"feedId",options:{unique:!1}},{name:"pubDate",keypath:"pubDate",options:{unique:!1}},{name:"link",keypath:"link",options:{unique:!1}},{name:"guid",keypath:"guid",options:{unique:!0}},{name:"author",keypath:"author",options:{unique:!1}},{name:"thumbnail",keypath:"thumbnail",options:{unique:!1}},{name:"description",keypath:"description",options:{unique:!1}},{name:"content",keypath:"content",options:{unique:!1}},{name:"categories",keypath:"categories",options:{unique:!1}},{name:"enclosure",keypath:"enclosure",options:{unique:!1}},{name:"isNew",keypath:"isNew",options:{unique:!1}}]},{store:"feeds",storeConfig:{keyPath:"id",autoIncrement:!0},storeSchema:[{name:"url",keypath:"url",options:{unique:!0}}]}]};let Le=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.Gb({type:e,bootstrap:[ge]}),e.\u0275inj=s.Fb({providers:[],imports:[[i.a,te.b,Q.b,b.e,he,o.a.forRoot(ve),me.a.register("/stupid-rss-reader/ngsw-worker.js",{enabled:!0})]]}),e})();Object(s.S)(),i.c().bootstrapModule(Le).catch(e=>console.error(e))},zn8P:function(e,t){function n(e){return Promise.resolve().then(function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="zn8P"}},[[0,0,4]]]);
//# sourceMappingURL=main.38d89e4b7c8f80b3dcf9.js.map