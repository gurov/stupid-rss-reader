(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{0:function(e,t,n){e.exports=n("zUnb")},zUnb:function(e,t,n){"use strict";n.r(t);var s=n("jhN1"),i=n("fXoL"),o=n("BvB/"),b=n("tyNb"),c=n("IAdc"),r=n("lJxs"),a=n("vkgz"),d=n("eIep"),u=n("Kj3r");class l{}class p{}var h=n("GyhO"),f=function(e){return e.FEEDS="feeds",e.POSTS="posts",e}({}),g=n("ofXK");let m=(()=>{class e{constructor(e){this.domSanitizer=e}transform(e){return this.domSanitizer.bypassSecurityTrustHtml(e)}}return e.\u0275fac=function(t){return new(t||e)(i.Ib(s.b))},e.\u0275pipe=i.Hb({name:"sanitizeHtml",type:e,pure:!0}),e})();function v(e,t){if(1&e&&i.Jb(0,"img",11),2&e){const e=i.Ub(2);i.Xb("src",e.post.thumbnail,i.ec)}}const L=function(e){return{green:e}};function y(e,t){if(1&e){const e=i.Mb();i.Lb(0,"div",4),i.gc(1,v,1,1,"img",5),i.Lb(2,"div",6),i.Lb(3,"small",7),i.hc(4),i.Kb(),i.Lb(5,"h3",8),i.Sb("click",function(){i.cc(e);const t=i.Ub();return t.hidden=!t.hidden}),i.Vb(6,"sanitizeHtml"),i.Kb(),i.Kb(),i.Lb(7,"button",9),i.Sb("click",function(){i.cc(e);const t=i.Ub();return t.hidden=!t.hidden}),i.hc(8,"\ufe0f"),i.Jb(9,"img",10),i.Kb(),i.Kb()}if(2&e){const e=i.Ub();i.yb(1),i.Xb("ngIf",e.post.thumbnail),i.yb(3),i.jc(" ",e.shortInfo," "),i.yb(1),i.Xb("innerHTML",i.Wb(6,4,e.post.title),i.dc),i.yb(2),i.Xb("ngClass",i.ac(6,L,e.post.isNew))}}function K(e,t){if(1&e&&i.Jb(0,"img",11),2&e){const e=i.Ub(2);i.Xb("src",e.post.thumbnail,i.ec)}}function S(e,t){if(1&e){const e=i.Mb();i.Lb(0,"div",4),i.gc(1,K,1,1,"img",5),i.Lb(2,"div",6),i.Lb(3,"small",7),i.hc(4),i.Kb(),i.Lb(5,"h3"),i.Jb(6,"a",12),i.Vb(7,"sanitizeHtml"),i.Lb(8,"sup"),i.hc(9," \u2197"),i.Kb(),i.Kb(),i.Kb(),i.Lb(10,"button",9),i.Sb("click",function(){i.cc(e);const t=i.Ub();return t.hidden=!t.hidden}),i.Jb(11,"img",13),i.Kb(),i.Kb()}if(2&e){const e=i.Ub();i.yb(1),i.Xb("ngIf",e.post.thumbnail),i.yb(3),i.jc(" ",e.shortInfo," "),i.yb(2),i.Xb("href",e.post.link,i.ec)("innerHTML",i.Wb(7,5,e.post.title),i.dc),i.yb(4),i.Xb("ngClass",i.ac(7,L,e.post.isNew))}}function I(e,t){1&e&&i.Jb(0,"hr")}function k(e,t){if(1&e&&(i.Lb(0,"div",14),i.Jb(1,"div",15),i.Vb(2,"sanitizeHtml"),i.Kb()),2&e){const e=i.Ub();i.yb(1),i.Xb("innerHTML",i.Wb(2,1,e.post.content),i.dc)}}function w(e,t){1&e&&(i.Lb(0,"span"),i.hc(1,", "),i.Kb())}function O(e,t){if(1&e&&(i.Lb(0,"em"),i.hc(1),i.gc(2,w,2,0,"span",1),i.Kb()),2&e){const e=t.$implicit,n=t.last;i.yb(1),i.ic(e),i.yb(1),i.Xb("ngIf",!n)}}function j(e,t){if(1&e&&(i.Lb(0,"div",16),i.gc(1,O,3,2,"em",17),i.Kb()),2&e){const e=i.Ub();i.yb(1),i.Xb("ngForOf",e.post.categories)}}function U(e,t){if(1&e&&i.Jb(0,"img",21),2&e){const e=i.Ub(3);i.Xb("src",e.post.enclosure.thumbnail,i.ec)}}function X(e,t){if(1&e&&(i.Lb(0,"a",19),i.gc(1,U,1,1,"img",20),i.Kb()),2&e){const e=i.Ub(2);i.Xb("href",e.post.enclosure.link,i.ec),i.yb(1),i.Xb("ngIf",e.post.enclosure.thumbnail)}}function F(e,t){if(1&e&&(i.Lb(0,"div"),i.hc(1),i.Kb()),2&e){const e=i.Ub(2);i.yb(1),i.jc("Type: ",null==e.post.enclosure?null:e.post.enclosure.type,"")}}function x(e,t){if(1&e&&(i.Lb(0,"div"),i.gc(1,X,2,2,"a",18),i.gc(2,F,2,1,"div",1),i.Kb()),2&e){const e=i.Ub();i.yb(1),i.Xb("ngIf",null==e.post.enclosure?null:e.post.enclosure.thumbnail),i.yb(1),i.Xb("ngIf",null==e.post.enclosure?null:e.post.enclosure.type)}}function E(e,t){if(1&e&&(i.Lb(0,"div"),i.hc(1),i.Kb()),2&e){const e=i.Ub(2);i.yb(1),i.jc("Type: ",null==e.post.enclosure?null:e.post.enclosure.type,"")}}function M(e,t){if(1&e&&(i.Lb(0,"div"),i.Jb(1,"img",21),i.gc(2,E,2,1,"div",1),i.Kb()),2&e){const e=i.Ub();i.yb(1),i.Xb("src",e.post.enclosure.link,i.ec),i.yb(1),i.Xb("ngIf",null==e.post.enclosure?null:e.post.enclosure.type)}}function R(e,t){if(1&e&&(i.Lb(0,"div"),i.hc(1),i.Kb()),2&e){const e=i.Ub(2);i.yb(1),i.jc("Type: ",null==e.post.enclosure?null:e.post.enclosure.type,"")}}function P(e,t){if(1&e&&(i.Lb(0,"div"),i.hc(1),i.Kb()),2&e){const e=i.Ub(2);i.yb(1),i.jc("Length: ",null==e.post.enclosure?null:e.post.enclosure.length,"")}}function T(e,t){if(1&e&&(i.Lb(0,"div"),i.Lb(1,"a",22),i.hc(2,"Enclosure"),i.Lb(3,"sup"),i.hc(4,"\u2197\ufe0f"),i.Kb(),i.Kb(),i.gc(5,R,2,1,"div",1),i.gc(6,P,2,1,"div",1),i.Kb()),2&e){const e=i.Ub();i.yb(1),i.Xb("href",e.post.enclosure.url,i.ec),i.yb(4),i.Xb("ngIf",null==e.post.enclosure?null:e.post.enclosure.type),i.yb(1),i.Xb("ngIf",null==e.post.enclosure?null:e.post.enclosure.length)}}let J=(()=>{class e{constructor(){this.post=new p,this.hidden=!0}get isImage(){var e,t,n;const s=(null===(t=null===(e=this.post)||void 0===e?void 0:e.enclosure)||void 0===t?void 0:t.type)||"";return"image"===(null===(n=null==s?void 0:s.split("/"))||void 0===n?void 0:n[0])}get shortInfo(){return[this.post.author,this.post.pubDate,this.readTime].filter(e=>e).join(", ")}get readTime(){const e=Math.round(this.post.content.toString().length/1500);return e<1?"":`\u23f1 ~${e}m`}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Cb({type:e,selectors:[["app-post"]],inputs:{post:"post"},decls:8,vars:8,consts:[["class","post-header",4,"ngIf"],[4,"ngIf"],["class","post-box",4,"ngIf"],["class","small text-muted mb-1",4,"ngIf"],[1,"post-header"],["class","post-header-thumbnail","alt","thumbnail",3,"src",4,"ngIf"],[1,"post-header-text"],[1,"short-info"],[3,"innerHTML","click"],[1,"ml-auto","a-button","post-button",3,"ngClass","click"],["src","assets/expand.svg","alt","Expand post"],["alt","thumbnail",1,"post-header-thumbnail",3,"src"],["target","_blank",3,"href","innerHTML"],["src","assets/unexpand.svg","alt","Unexpand post"],[1,"post-box"],[3,"innerHTML"],[1,"small","text-muted","mb-1"],[4,"ngFor","ngForOf"],[3,"href",4,"ngIf"],[3,"href"],["alt","thumbnail",3,"src",4,"ngIf"],["alt","thumbnail",3,"src"],["target","_blank",3,"href"]],template:function(e,t){1&e&&(i.gc(0,y,10,8,"div",0),i.gc(1,S,12,9,"div",0),i.gc(2,I,1,0,"hr",1),i.gc(3,k,3,3,"div",2),i.gc(4,j,2,1,"div",3),i.gc(5,x,3,2,"div",1),i.gc(6,M,3,2,"div",1),i.gc(7,T,7,3,"div",1)),2&e&&(i.Xb("ngIf",t.hidden),i.yb(1),i.Xb("ngIf",!t.hidden),i.yb(1),i.Xb("ngIf",!t.hidden),i.yb(1),i.Xb("ngIf",!t.hidden),i.yb(1),i.Xb("ngIf",(null==t.post||null==t.post.categories?null:t.post.categories.length)&&!t.hidden),i.yb(1),i.Xb("ngIf",(null==t.post.enclosure?null:t.post.enclosure.thumbnail)&&!t.hidden),i.yb(1),i.Xb("ngIf",t.isImage&&!t.hidden),i.yb(1),i.Xb("ngIf",!(null!=t.post.enclosure&&t.post.enclosure.thumbnail)&&!t.hidden&&(null==t.post.enclosure?null:t.post.enclosure.url)))},directives:[g.j,g.h,g.i],pipes:[m],encapsulation:2}),e})();function C(e,t){if(1&e){const e=i.Mb();i.Lb(0,"button",20),i.Sb("click",function(){return i.cc(e),i.Ub(2).removeAllPosts()}),i.hc(1,"Remove all posts"),i.Kb()}}function D(e,t){if(1&e){const e=i.Mb();i.Lb(0,"div",17),i.Lb(1,"button",18),i.Sb("click",function(){return i.cc(e),i.Ub().deleteFeed()}),i.hc(2,"Delete the feed"),i.Kb(),i.gc(3,C,2,0,"button",19),i.Kb()}if(2&e){const e=i.Ub();i.yb(3),i.Xb("ngIf",e.posts.length>0)}}function A(e,t){if(1&e&&(i.Lb(0,"div"),i.Lb(1,"strong",21),i.hc(2,"Title:"),i.Kb(),i.Lb(3,"span"),i.hc(4),i.Kb(),i.Kb()),2&e){const e=i.Ub();i.yb(4),i.ic(e.about.title)}}function $(e,t){if(1&e&&(i.Lb(0,"div"),i.Lb(1,"strong",21),i.hc(2,"Author:"),i.Kb(),i.Lb(3,"span"),i.hc(4),i.Kb(),i.Kb()),2&e){const e=i.Ub();i.yb(4),i.ic(e.about.author)}}function q(e,t){if(1&e&&(i.Lb(0,"div"),i.Lb(1,"strong",21),i.hc(2,"Description:"),i.Kb(),i.Lb(3,"span"),i.hc(4),i.Kb(),i.Kb()),2&e){const e=i.Ub();i.yb(4),i.ic(e.about.description)}}function N(e,t){if(1&e&&(i.Lb(0,"div"),i.Lb(1,"strong",21),i.hc(2,"Link:"),i.Kb(),i.Lb(3,"a",22),i.hc(4),i.Kb(),i.Kb()),2&e){const e=i.Ub();i.yb(3),i.Yb("href",e.about.link,i.ec),i.yb(1),i.ic(e.about.link)}}function B(e,t){if(1&e&&(i.Lb(0,"div",23),i.Jb(1,"app-post",24),i.Kb()),2&e){const e=t.$implicit;i.yb(1),i.Xb("post",e)}}function H(e,t){if(1&e){const e=i.Mb();i.Lb(0,"div",25),i.Lb(1,"button",26),i.Sb("click",function(){return i.cc(e),i.Ub().showMore()}),i.hc(2," Show 10 more posts "),i.Kb(),i.Kb()}}const z=function(e){return{"active-actions":e}};let _=(()=>{class e{constructor(e,t,n){this.dbService=e,this.router=t,this.route=n,this.posts=[],this.displayActions=!1,this.viewCount=10,this.about=new l,this.identify=(e,t)=>t.id}get viewPosts(){return this.posts.slice(0,this.viewCount)}showMore(){this.viewCount+=10}markAsRead(){const e=this.posts.filter(e=>e.isNew).map(e=>this.dbService.update(f.POSTS,Object.assign(Object.assign({},e),{isNew:!1})));Object(h.a)(...e).pipe(Object(c.a)()).subscribe()}deleteTail(){const e=this.posts.slice(99).map(e=>this.dbService.delete(f.POSTS,e.id));Object(h.a)(...e).pipe(Object(c.a)()).subscribe()}ngOnInit(){this.route.params.pipe(Object(r.a)(e=>e.id),Object(a.a)(e=>this.feedId=+e),Object(d.a)(e=>this.dbService.getByID(f.FEEDS,+e)),Object(a.a)(e=>this.about=e.about),Object(d.a)(e=>this.dbService.getAllByIndex(f.POSTS,"feedId",IDBKeyRange.only(this.feedId))),Object(a.a)(e=>this.posts=(null==e?void 0:e.reverse())||[]),Object(u.a)(200),Object(a.a)(()=>this.markAsRead()),Object(u.a)(200),Object(a.a)(()=>this.deleteTail())).subscribe()}deleteFeed(){if(!0===confirm("Remove the feed?")){const e=[this.dbService.delete(f.FEEDS,this.feedId),...this.posts.map(e=>this.dbService.delete(f.POSTS,e.id))];Object(h.a)(...e).pipe(Object(c.a)()).subscribe(()=>this.router.navigate(["/"]))}}removeAllPosts(){if(!0===confirm("Remove all the posts?")){const e=this.posts.map(e=>this.dbService.delete(f.POSTS,e.id));Object(h.a)(...e).pipe(Object(c.a)()).subscribe(()=>this.ngOnInit())}}}return e.\u0275fac=function(t){return new(t||e)(i.Ib(o.b),i.Ib(b.b),i.Ib(b.a))},e.\u0275cmp=i.Cb({type:e,selectors:[["app-feed"]],decls:26,vars:12,consts:[[3,"ngClass"],[1,"container"],[1,"p-1"],[1,"top-top-feed"],[1,"a-button","lh-20",3,"click"],["routerLink","/",1,"ml-auto"],["width","16","src","assets/back.svg","alt","Back to feeds"],["class","mb-2 mt-1",4,"ngIf"],[1,"w-100"],[1,"feed-image"],["onerror","this.src='assets/icon-72x72.png'","alt","image",3,"src"],[1,"feed-about"],[4,"ngIf"],["class","post-wrapper",4,"ngFor","ngForOf","ngForTrackBy"],["class","feed-line p-1 pb-2",4,"ngIf"],[1,"bottom-box"],["src","assets/favicon-32x32.png"],[1,"mb-2","mt-1"],[1,"a-button","red","lh-20","mr-1",3,"click"],["class","a-button red lh-20",3,"click",4,"ngIf"],[1,"a-button","red","lh-20",3,"click"],[1,"mr-1"],["target","_blank",3,"href"],[1,"post-wrapper"],[3,"post"],[1,"feed-line","p-1","pb-2"],[1,"ml-auto","a-button","mr-auto",3,"click"]],template:function(e,t){1&e&&(i.Lb(0,"div",0),i.Lb(1,"div",1),i.Lb(2,"div",2),i.Lb(3,"div",3),i.Lb(4,"button",4),i.Sb("click",function(){return t.displayActions=!t.displayActions}),i.hc(5,"\u2699"),i.Kb(),i.Lb(6,"a",5),i.Jb(7,"img",6),i.hc(8," Back to feeds "),i.Kb(),i.Kb(),i.gc(9,D,4,1,"div",7),i.Kb(),i.Kb(),i.Kb(),i.Lb(10,"div",1),i.Lb(11,"table",8),i.Lb(12,"tbody"),i.Lb(13,"tr"),i.Lb(14,"td",9),i.Jb(15,"img",10),i.Kb(),i.Lb(16,"td",11),i.gc(17,A,5,1,"div",12),i.gc(18,$,5,1,"div",12),i.gc(19,q,5,1,"div",12),i.gc(20,N,5,2,"div",12),i.Kb(),i.Kb(),i.Kb(),i.Kb(),i.gc(21,B,2,1,"div",13),i.gc(22,H,3,0,"div",14),i.Jb(23,"hr"),i.Lb(24,"div",15),i.Jb(25,"img",16),i.Kb(),i.Kb()),2&e&&(i.Xb("ngClass",i.ac(10,z,t.displayActions)),i.yb(9),i.Xb("ngIf",t.displayActions),i.yb(6),i.Xb("src",t.about.image||"assets/icon-72x72.png",i.ec),i.yb(2),i.Xb("ngIf",t.about.title),i.yb(1),i.Xb("ngIf",t.about.author),i.yb(1),i.Xb("ngIf",t.about.description),i.yb(1),i.Xb("ngIf",t.about.link),i.yb(1),i.Xb("ngForOf",t.viewPosts)("ngForTrackBy",t.identify),i.yb(1),i.Xb("ngIf",t.viewCount<t.posts.length))},directives:[g.h,b.d,g.j,g.i,J],encapsulation:2}),e})();var W=n("XNiG"),V=n("itXk"),G=n("1G5W"),Y=n("2Vo4"),Z=n("LRne"),Q=n("JIr8"),ee=n("tk/3");let te=(()=>{class e{constructor(e,t){this.http=e,this.dbService=t,this.feedLoading$=new Y.a({}),this.feedError$=new Y.a({})}setFeedLoading(e,t){const n=this.feedLoading$.getValue();this.feedLoading$.next(Object.assign(Object.assign({},n),{[e]:t}))}setFeedError(e,t){const n=this.feedError$.getValue();this.feedError$.next(Object.assign(Object.assign({},n),{[e]:t}))}updateFeed(e,t,n){this.dbService.update(f.FEEDS,{url:e,id:t,about:n})}addPosts(e,t,n,s){Object(V.a)(e.map(e=>this.dbService.add(f.POSTS,Object.assign(Object.assign({},e),{feedId:t,isNew:!0})).pipe(Object(Q.a)(()=>Object(Z.a)(-1))))).pipe(Object(d.a)(()=>this.dbService.getAllByIndex(f.POSTS,"feedId",IDBKeyRange.only(t))),Object(r.a)(e=>[e.length,e.filter(e=>e.isNew).length]),Object(r.a)(([e,i])=>({url:n,id:t,about:s,count:e,newCount:i}))).subscribe(e=>this.dbService.update(f.FEEDS,e))}getNewPostsAndUpdateStore(e,t){return this.setFeedLoading(t,!0),this.http.get(encodeURI(`https://api.rss2json.com/v1/api.json?rss_url=${e}`)).pipe(Object(a.a)(n=>{this.addPosts(n.items.reverse(),t,e,n.feed),this.setFeedLoading(t,!1)}),Object(Q.a)(e=>(this.setFeedLoading(t,!1),this.setFeedError(t,e.message||"Error"),Object(Z.a)(null))))}refreshFeeds(e){const t=e.map(e=>this.getNewPostsAndUpdateStore(e.url,e.id));return Object(h.a)(...t).pipe(Object(c.a)())}}return e.\u0275fac=function(t){return new(t||e)(i.Pb(ee.a),i.Pb(o.b))},e.\u0275prov=i.Eb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var ne=n("3Pt+");function se(e,t){if(1&e){const e=i.Mb();i.Lb(0,"button",22),i.Sb("click",function(){return i.cc(e),i.Ub().share()}),i.Jb(1,"img",23),i.Kb()}}function ie(e,t){if(1&e&&(i.Lb(0,"div",32),i.Lb(1,"small"),i.hc(2),i.Kb(),i.Kb()),2&e){const e=i.Ub().$implicit,t=i.Ub();i.yb(2),i.jc("\ud83d\udca2 ",t.feedError[e.id],"")}}function oe(e,t){1&e&&i.Jb(0,"span",33)}function be(e,t){if(1&e&&(i.Lb(0,"sup",35),i.hc(1),i.Kb()),2&e){const e=i.Ub(2).$implicit;i.yb(1),i.jc(" +",e.newCount," ")}}function ce(e,t){if(1&e&&(i.Lb(0,"span"),i.gc(1,be,2,1,"sup",34),i.hc(2),i.Kb()),2&e){const e=i.Ub().$implicit;i.yb(1),i.Xb("ngIf",e.newCount),i.yb(1),i.jc(" ",e.count||"-"," ")}}const re=function(e){return["/",e]};function ae(e,t){if(1&e&&(i.Lb(0,"div",24),i.Lb(1,"div",25),i.Lb(2,"strong",26),i.hc(3),i.Kb(),i.Jb(4,"br"),i.Lb(5,"small",26),i.hc(6),i.Kb(),i.gc(7,ie,3,1,"div",27),i.Kb(),i.Lb(8,"div",28),i.Lb(9,"button",29),i.gc(10,oe,1,0,"span",30),i.gc(11,ce,3,2,"span",31),i.Kb(),i.Kb(),i.Kb()),2&e){const e=t.$implicit,n=i.Ub();i.yb(3),i.ic((null==e.about?null:e.about.title)||"noname"),i.yb(3),i.ic(e.url),i.yb(1),i.Xb("ngIf",n.feedError[e.id]),i.yb(2),i.Xb("disabled",n.feedLoading[e.id])("routerLink",i.ac(7,re,e.id)),i.yb(1),i.Xb("ngIf",n.feedLoading[e.id]),i.yb(1),i.Xb("ngIf",!n.feedLoading[e.id])}}function de(e,t){if(1&e){const e=i.Mb();i.Lb(0,"div",36),i.Lb(1,"button",37),i.Sb("click",function(){return i.cc(e),i.Ub().addFeedMode=!0}),i.hc(2,"+ add"),i.Kb(),i.Kb()}}const ue=function(){return["https://example.com/feed1\nhttps://example.com/feed2"]};function le(e,t){if(1&e){const e=i.Mb();i.Lb(0,"form",38),i.Lb(1,"fieldset"),i.Lb(2,"label",39),i.hc(3,"Enter new feed URLs"),i.Kb(),i.Lb(4,"textarea",40),i.Sb("ngModelChange",function(t){return i.cc(e),i.Ub().rawFeedURLs=t}),i.Kb(),i.Lb(5,"button",41),i.Sb("click",function(){i.cc(e);const t=i.Ub();return t.addFeeds(t.rawFeedURLs)}),i.hc(6,"Add to the feeds"),i.Kb(),i.Kb(),i.Kb()}if(2&e){const e=i.Ub();i.yb(4),i.Xb("ngModel",e.rawFeedURLs)("placeholder",i.Zb(2,ue))}}function pe(e,t){if(1&e){const e=i.Mb();i.Lb(0,"button",42),i.Sb("click",function(){return i.cc(e),i.Ub().unregister()}),i.hc(1,"Unregister SW"),i.Kb()}}const he=[{path:":id",component:_},{path:"",component:(()=>{class e{constructor(e,t){this.dbService=e,this.coreService=t,this.feeds=[],this.addFeedMode=!1,this.godMode=!1,this.rawFeedURLs="",this.feedLoading={},this.feedError={},this.loading=!1,this.ngUnsubscribe$=new W.a,this.identify=(e,t)=>t.id}get shareIsSuported(){return!!navigator.share}addFeeds(e){this.addFeedMode=!1,this.rawFeedURLs="";const t=e.split("\n").map(e=>e.trim()).filter(e=>e).filter(e=>(e=>{let t;try{t=new URL(e)}catch(n){return!1}return"http:"===t.protocol||"https:"===t.protocol})(e)).map(e=>this.dbService.add(f.FEEDS,{url:e}));Object(V.a)(t).subscribe(()=>this.load())}refreshFeeds(){this.loading=!0,this.feedError={},this.coreService.refreshFeeds(this.feeds).subscribe(()=>{this.loading=!1,this.load()})}share(){var e;null===(e=navigator.share)||void 0===e||e.call(navigator,{title:"Stupid RSS",text:this.feeds.map(e=>e.url).join(" \n"),url:location.href})}load(){this.dbService.getAll(f.FEEDS).subscribe(e=>this.feeds=e)}ngOnInit(){this.coreService.feedLoading$.pipe(Object(G.a)(this.ngUnsubscribe$)).subscribe(e=>{this.feedLoading=e,this.load()}),this.coreService.feedError$.pipe(Object(G.a)(this.ngUnsubscribe$)).subscribe(e=>{this.feedError=e,this.load()}),this.load();try{this.addFeeds(function(){const e=localStorage.getItem("feedList");localStorage.removeItem("feedList");try{return JSON.parse(e).join("\n")}catch(t){return""}}())}catch(e){}}unregister(){var e;!0===confirm("Unregister the Service Worker?")&&(null===(e=navigator.serviceWorker)||void 0===e||e.getRegistrations().then(e=>{for(const t of e)t.unregister()}))}ngOnDestroy(){this.ngUnsubscribe$.next(),this.ngUnsubscribe$.complete()}}return e.\u0275fac=function(t){return new(t||e)(i.Ib(o.b),i.Ib(te))},e.\u0275cmp=i.Cb({type:e,selectors:[["app-home"]],decls:65,vars:7,consts:[[1,"container","mb-3","mt-3"],[1,"w-100"],["routerLink","/"],["alt","Stupid RSS Reader logo","src","assets/fur-boot-green.svg",2,"width","5rem"],[1,"ml-2","app-name"],[1,"container","p-1","mb-2",2,"background-color","rgba(255,248,220,0.5)"],[1,"feeds-header"],[1,"mr-auto"],["class","a-button button-share mr-1",3,"click",4,"ngIf"],[1,"a-button","green",3,"disabled","click"],["class","feed-line",4,"ngFor","ngForOf","ngForTrackBy"],["class","mt-1",4,"ngIf"],["class","pure-form pure-form-stacked",4,"ngIf"],[1,"container","p-1","mb-2",2,"background-color","rgba(255,235,205,0.5)"],["href","https://rss2json.com/","target","_blank"],["href","https://developers.google.com/web/progressive-web-apps/","target","_blank"],["href","https://developer.mozilla.org/ru/docs/Web/API/IndexedDB_API","target","_blank"],["href","https://github.com/gurov/stupid-rss-reader","target","_blank"],[1,"container","p-1","mb-2",2,"background-color","rgba(255,250,240,0.5)"],[1,"bottom-box"],["src","assets/favicon-32x32.png",3,"click"],["class","a-button red ml-1 lh-20",3,"click",4,"ngIf"],[1,"a-button","button-share","mr-1",3,"click"],["src","assets/share.svg","alt","Share feeds"],[1,"feed-line"],[1,"mr-1"],[1,"fit-text"],["style","color: #82280c","class","fit-text",4,"ngIf"],[1,"ml-auto",2,"text-align","right"],[1,"a-button","button-counter",3,"disabled","routerLink"],["class","spinner",4,"ngIf"],[4,"ngIf"],[1,"fit-text",2,"color","#82280c"],[1,"spinner"],["class","new-info",4,"ngIf"],[1,"new-info"],[1,"mt-1"],[1,"a-button","lh-20",3,"click"],[1,"pure-form","pure-form-stacked"],["for","new-feeds"],["name","rawFeedURLs","id","new-feeds",1,"pure-input-1",3,"ngModel","placeholder","ngModelChange"],["type","button",1,"a-button","lh-20",3,"click"],[1,"a-button","red","ml-1","lh-20",3,"click"]],template:function(e,t){1&e&&(i.Lb(0,"div",0),i.Lb(1,"table",1),i.Lb(2,"tbody"),i.Lb(3,"tr"),i.Lb(4,"td"),i.Lb(5,"a",2),i.Jb(6,"img",3),i.Kb(),i.Kb(),i.Lb(7,"td"),i.Lb(8,"h1",4),i.hc(9,"Stupid RSS Reader"),i.Kb(),i.Kb(),i.Kb(),i.Kb(),i.Kb(),i.Kb(),i.Lb(10,"div",5),i.Lb(11,"div",6),i.Lb(12,"h2",7),i.hc(13,"Feeds"),i.Kb(),i.gc(14,se,2,0,"button",8),i.Lb(15,"button",9),i.Sb("click",function(){return t.refreshFeeds()}),i.hc(16,"Refresh all feeds"),i.Kb(),i.Kb(),i.gc(17,ae,12,9,"div",10),i.gc(18,de,3,0,"div",11),i.Lb(19,"div"),i.gc(20,le,7,3,"form",12),i.Kb(),i.Kb(),i.Lb(21,"div",13),i.Lb(22,"h3"),i.hc(23,"About"),i.Kb(),i.Lb(24,"p"),i.hc(25,"I'm tired of different stupid RSS clients and I created own Stupid RSS Reader."),i.Kb(),i.Lb(26,"h4"),i.hc(27,"Proxy for RSS"),i.Kb(),i.Lb(28,"p"),i.hc(29," The application must use the proxy "),i.Lb(30,"a",14),i.hc(31,"rss2json.com"),i.Kb(),i.hc(32," because CORS restrictions on cross-site requests. "),i.Kb(),i.Lb(33,"h4"),i.hc(34,"Features"),i.Kb(),i.Lb(35,"ul"),i.Lb(36,"li"),i.hc(37,"Stupid RSS is "),i.Lb(38,"a",15),i.hc(39,"Progressive Web App"),i.Kb(),i.Kb(),i.Lb(40,"li"),i.hc(41,"You can install it to your smartphone"),i.Kb(),i.Lb(42,"li"),i.hc(43,"Very simple interface"),i.Kb(),i.Lb(44,"li"),i.hc(45,"Offline mode"),i.Kb(),i.Lb(46,"li"),i.hc(47,"All user data are stored locally only ("),i.Lb(48,"a",16),i.hc(49,"IndexedDB"),i.Kb(),i.hc(50,")"),i.Kb(),i.Lb(51,"li"),i.hc(52,"The last 99 posts are stored. Deletion occurs after downloading new ones"),i.Kb(),i.Lb(53,"li"),i.hc(54,"Open source: "),i.Lb(55,"a",17),i.hc(56,"Github"),i.Kb(),i.Kb(),i.Kb(),i.Kb(),i.Lb(57,"div",18),i.Lb(58,"h3"),i.hc(59,"Philosophy"),i.Kb(),i.Lb(60,"p"),i.hc(61,"The application does not impose anything, but only executes orders."),i.Kb(),i.Kb(),i.Lb(62,"div",19),i.Lb(63,"img",20),i.Sb("click",function(){return t.godMode=!t.godMode}),i.Kb(),i.gc(64,pe,2,0,"button",21),i.Kb()),2&e&&(i.yb(14),i.Xb("ngIf",t.shareIsSuported),i.yb(1),i.Xb("disabled",t.loading),i.yb(2),i.Xb("ngForOf",t.feeds)("ngForTrackBy",t.identify),i.yb(1),i.Xb("ngIf",!t.addFeedMode),i.yb(2),i.Xb("ngIf",t.addFeedMode),i.yb(44),i.Xb("ngIf",t.godMode))},directives:[b.d,g.j,g.i,b.c,ne.g,ne.d,ne.e,ne.a,ne.c,ne.f],encapsulation:2}),e})()}];let fe=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.Gb({type:e}),e.\u0275inj=i.Fb({imports:[[b.e.forRoot(he,{useHash:!0})],b.e]}),e})(),ge=(()=>{class e{constructor(){this.title="stupid-rss-reader"}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Cb({type:e,selectors:[["app-root"]],decls:2,vars:0,template:function(e,t){1&e&&(i.Lb(0,"div"),i.Jb(1,"router-outlet"),i.Kb())},directives:[b.f],styles:[""]}),e})();var me=n("Jho9");const ve={name:"Stupid-RSS-Reader",version:2,objectStoresMeta:[{store:f.POSTS,storeConfig:{keyPath:"id",autoIncrement:!0},storeSchema:[{name:"title",keypath:"title",options:{unique:!1}},{name:"feedId",keypath:"feedId",options:{unique:!1}},{name:"pubDate",keypath:"pubDate",options:{unique:!1}},{name:"link",keypath:"link",options:{unique:!1}},{name:"guid",keypath:"guid",options:{unique:!0}},{name:"author",keypath:"author",options:{unique:!1}},{name:"thumbnail",keypath:"thumbnail",options:{unique:!1}},{name:"description",keypath:"description",options:{unique:!1}},{name:"content",keypath:"content",options:{unique:!1}},{name:"categories",keypath:"categories",options:{unique:!1}},{name:"enclosure",keypath:"enclosure",options:{unique:!1}},{name:"isNew",keypath:"isNew",options:{unique:!1}}]},{store:f.FEEDS,storeConfig:{keyPath:"id",autoIncrement:!0},storeSchema:[{name:"url",keypath:"url",options:{unique:!0}},{name:"about",keypath:"about",options:{unique:!1}},{name:"newCount",keypath:"newCount",options:{unique:!1}},{name:"count",keypath:"count",options:{unique:!1}}]}],migrationFactory:function(){return{2:(e,t)=>{const n=t.objectStore(f.FEEDS);n.createIndex("newPostIds","newPostIds",{unique:!1}),n.createIndex("postIds","postIds",{unique:!1})}}}};let Le=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.Gb({type:e,bootstrap:[ge]}),e.\u0275inj=i.Fb({providers:[],imports:[[s.a,ne.b,ee.b,b.e,fe,o.a.forRoot(ve),me.a.register("/stupid-rss-reader/ngsw-worker.js",{enabled:!0})]]}),e})();Object(i.S)(),s.c().bootstrapModule(Le).catch(e=>console.error(e))},zn8P:function(e,t){function n(e){return Promise.resolve().then(function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="zn8P"}},[[0,0,4]]]);
//# sourceMappingURL=main.240d1eed98a0a069a495.js.map